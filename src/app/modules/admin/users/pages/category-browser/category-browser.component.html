<div class="category-container">
  <h2 class="section-title">Shop by Category</h2>

  <!-- Categories -->
  <div class="category-grid">
    <mat-card *ngFor="let c of categories" (click)="selectCategory(c)"
              [class.selected]="c.id === selectedCategory?.id">
      <mat-card-title>{{ c.name }}</mat-card-title>
    </mat-card>
  </div>

  <!-- Subcategories -->
  <div *ngIf="selectedCategory" class="subcategory-grid">
    <h3>{{ selectedCategory.name }}</h3>
    <div class="subcategory-items">
      <button mat-raised-button color="accent"
              *ngFor="let sub of subCategories"
              (click)="selectSubCategory(sub)">
        {{ sub.name }}
      </button>
    </div>
  </div>

  <!-- ðŸ›ï¸ Products Section -->
<div *ngIf="products.length > 0" class="product-grid">
  <h3 class="section-heading">{{ selectedSubCategory?.name }} Products</h3>

  <mat-card *ngFor="let p of products" class="product-card">
    <img
      mat-card-image
      [src]="p.imageUrl || 'https://via.placeholder.com/300x200.png?text=' + p.name"
      [alt]="p.name"
      class="product-image"
    />

    <mat-card-content class="product-info">
      <mat-card-title>{{ p.name }}</mat-card-title>
      <mat-card-subtitle>â‚¹{{ p.price }}</mat-card-subtitle>
      <p class="product-description">{{ p.description }}</p>

      <button mat-raised-button color="primary" class="add-btn">
        <mat-icon>add_shopping_cart</mat-icon>
        Add to Cart
      </button>
    </mat-card-content>
  </mat-card>
</div>

<div *ngIf="loading" class="loading-spinner">
  <mat-spinner diameter="50"></mat-spinner>
</div>

<div *ngIf="!loading && !products.length && selectedSubCategory">
  <p class="no-products">No products found ðŸ˜”</p>
</div>


  <div *ngIf="loading">Loading...</div>
</div>
